<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Pollocrudo Music</title>
  <style>
    body { background:#121212; color:#eee; font-family: Arial, sans-serif; padding: 20px; }
    #searchBar { width: 80%; padding: 10px; font-size: 16px; }
    #btnSearch { padding: 10px 15px; font-size: 16px; cursor: pointer; }
    #player { margin-top: 20px; width: 100%; height: 240px; }
    #lyrics { margin-top: 20px; font-size: 14px; white-space: pre-wrap; min-height: 100px; }
  </style>
</head>
<body>
  <h2>Pollocrudo Music</h2>
  <input id="searchBar" placeholder="Busca canción..." />
  <button id="btnSearch">Buscar</button>
  <div id="player"></div>
  <div id="lyrics">Aquí aparecerán las letras...</div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '240',
        width: '100%',
        videoId: '',
        playerVars: { 'playsinline': 1 },
      });
    }

    document.getElementById('btnSearch').onclick = async () => {
      const query = encodeURIComponent(document.getElementById('searchBar').value);
      const apiKey = 'TU_API_KEY_YOUTUBE';  // Pon aquí tu API Key de YouTube

      const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=1&q=${query}&key=${apiKey}`);
      const data = await res.json();
      if (!data.items || data.items.length === 0) {
        alert('No se encontró canción');
        return;
      }
      const videoId = data.items[0].id.videoId;
      player.loadVideoById(videoId);

      // Letra básica (no sincronizada)
      fetch(`https://yt.lemnoslife.com/videos?part=explicitLyrics&id=${videoId}`)
        .then(res => res.json())
        .then(json => {
          if (json.items && json.items.length > 0 && json.items[0].explicitLyrics === false) {
            document.getElementById('lyrics').innerText = 'Letra no disponible (API no oficial)';
          } else {
            document.getElementById('lyrics').innerText = 'Letra explícita o no disponible';
          }
        })
        .catch(() => {
          document.getElementById('lyrics').innerText = 'Error cargando letra';
        });
    };
  </script>
</body>
</html>